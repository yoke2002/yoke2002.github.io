<!DOCTYPE html>
<html><head>
<title>SpringBoot 博客项目总结</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="既然学完了 SpringBoot，就可以开始找单体项目进行实战，如果不多写两个项目，直接去看微服务，大概率会摔个大跟头，接下来就总结一下我的收获。">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">















  




<link rel="icon" href="https://yoke2002.github.io/images/avatar.jpg">



      <script src="/js/toc.js"></script>
    
    <link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">

<link rel="stylesheet" href="/scss/dark-mode.min.96705bf2f1d2bde5e97466e58b273023d180673df5bc38c409cc5816ec3b11b4.css" integrity="sha256-lnBb8vHSveXpdGbliycwI9GAZz31vDjECcxYFuw7EbQ=" media="screen">



<link rel="stylesheet"
      href="https://cdn.bootcdn.net/ajax/libs/firacode/6.2.0/fira_code.min.css">
<link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Lora|Montserrat|Fira+Mono|Noto+Serif+SC|Material+Icons">



















</head>
<body>
    	<div id="app"><div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    歸檔 / Archive
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    分類 / Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/about">
                    關於 / About
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 目錄 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%89%8d%e8%a8%80" class="nav-前言">
									前言
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8d%9a%e5%ae%a2%e9%a1%b9%e7%9b%ae" class="nav-博客项目">
									博客项目
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9b%b8%e5%85%b3" class="nav-数据库相关">
									数据库相关
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%a1%b9%e7%9b%ae%e6%90%ad%e5%bb%ba" class="nav-项目搭建">
									项目搭建
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%99%bb%e5%bd%95%e5%92%8c%e8%ae%a4%e8%af%81" class="nav-登录和认证">
									登录和认证
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%9d%83%e9%99%90%e5%88%86%e7%a6%bb" class="nav-权限分离">
									权限分离
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%a0%91%e5%bd%a2%e7%bb%93%e6%9e%84" class="nav-树形结构">
									树形结构
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%9b%be%e7%89%87%e4%b8%8a%e4%bc%a0%e5%88%b0-oss" class="nav-图片上传到-oss">
									图片上传到 OSS
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%85%b6%e5%ae%83" class="nav-其它">
									其它
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%80%bb%e7%bb%93" class="nav-总结">
									总结
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://yoke2002.github.io/">
            白日幻想家
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://yoke2002.github.io/">
        <div class="single-column-header-title">白日幻想家</div>
        
        <div class="single-column-header-subtitle">争取去发光，而不是等待被照亮</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            
                
            

            <div class="post-head-wrapper"
                
                    
                    
                    style="background-image: url('https://yoke2002.github.io/images/cover/2023/what-is-spring-boot.jpg')"
                    
                
            >
                <div class="post-title">
                    SpringBoot 博客项目总结
                    
                    <div class="post-subtitle">
                        既然学完了 SpringBoot，就可以开始找单体项目进行实战，如果不多写两个项目，直接去看微服务，大概率会摔个大跟头，接下来就总结一下我的收获。
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2023-11-21 21:49
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93">项目总结</a>
                                &nbsp;
                        

                        
                        
                            <i class="material-icons" style="">schedule</i>
                            

                            
                            

                            
                            10 min
                            
                            24 s.
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h2 id="前言">前言</h2>
<p>从十月底开始，我一直在学习 Java 后端开发的知识。随着博客项目接近尾声，来对这段时间做一个阶段性小结，一个月以来，我从 Java 基础、MySQL、Java Web 学到 Mybatis、Spring、SpringMVC 以及 SpringBoot，还有项目中用到的 Spring Security、Mybatis Plus 和 Redis 等等。其实之前也接触过这里面的部分技术，写点简单的 Servlet，对于 Spring 全家桶概念还不是那么清楚，比如之前一直不知道 SpringMVC 是什么，再加上很久没有 coding，连 Java 最基本的 API 都忘得一干二净。因此，那时我决定从基础开始学习。一个月接触这么多，是因为不想浪费这么多时间，很多东西学了就忘了，以后估计也用不到，只有一些重要的东西值得花时间去探究原理，如并发编程和数据库等。至于 Spring，以后换个语言、换个公司，框架就换了。（当然也不是完全放弃，框架的思想，用到的设计模式、反射等知识也非常值得学习）</p>
<h2 id="博客项目">博客项目</h2>
<p>既然学完了 SpringBoot，就可以开始找单体项目进行实战，如果不多写两个项目，直接去看微服务，大概率会摔个大跟头。我 Spring 全家桶都是跟一个 UP 主学的，刚好有项目的视频教程，把前面学习的东西都能用上，我就直接跟着他做了，接下来就总结一下我的收获（<del>菜狗的自我反思属于是</del>）。</p>
<h3 id="数据库相关">数据库相关</h3>
<p>在基础阶段，我认为有两个比较难的点：</p>
<ul>
<li>数据库设计：如何准确理解需求，设计出对应的表，理清表之间的关系，设计好约束和外键。</li>
<li>联表查询：对于复杂的查询来说，涉及到多张表，如何准确地联表获得想要的数据。
我全程都是跟着老师的思路走，到现在为止，我仍然觉得它们是困难的，可能还是自己基础不牢，实战太少。因此，还是需要不断的实战和思考来提升自己这方面的能力。</li>
</ul>
<h3 id="项目搭建">项目搭建</h3>
<p>这个项目是使用 Maven 搭建的，和以往不同，由于这个博客项目分为前台和后台，写在一起太复杂，但为了复用，把这个项目拆成了两个模块，继承父模块，能够统一管理依赖，并提高公共类的复用性。以前一直以为只有微服务项目才这样拆，原来单体项目也可以。
另外，之前创建项目时都是使用 IDEA 勾选添加依赖，现在是手动引入的（虽然是复制的），让我对整个项目的依赖了解更加清楚，知道每个依赖有什么作用。</p>
<h3 id="登录和认证">登录和认证</h3>
<p>这个项目的登录和认证引入了 Spring Security，一开始我在想，之前登录也不需要写多少代码呀，为什么要用一个这么复杂的库，所以刚开始时也是懵懵的，后来又在网上找别人的博客学习才勉强搞懂了一点。其实在简单的项目中用 Spring Security 确实没有必要，这个库很重，但是项目大起来了之后，登录和认证的流程也不会简单，这个时候使用就很合适。下面记录一下在这个项目中使用的步骤：</p>
<ol>
<li>自定义登录接口，把用户的信息封装到 <code>UsernamePasswordAuthenticationToken</code> 中，调用 <code>AuthenticationManager</code> 对象的 <code>authenticate</code> 方法进行认证，如果认证通过，生成 token 返回给前端。</li>
<li>Spring Security 认证时是默认到内存中去取数据进行认证，所以需要自己实现 <code>UserDetailsService</code> 接口，让它去数据库中查数据，这里密码加密可以配置 <code>passwordEncoder</code> 为 <code>BCryptPasswordEncoder</code>。</li>
<li>最后就是有 token 时的校验，需要自定义一个 JWT 认证过滤器，它的工作是获取 token 并解析，得到 userId，封装成 <code>Authentication</code> 对象，这里调用的是 <code>UsernamePasswordAuthenticationToken</code> 三个参数的构造方法（登录时调用的是有两个参数的构造方法），存入 <code>SecurityContextHolder</code>，后面的过滤器就知道认证通过了。</li>
</ol>
<p>附上一份配置代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8caaee;font-weight:bold">@Configuration</span>  
</span></span><span style="display:flex;"><span><span style="color:#8caaee;font-weight:bold">@EnableGlobalMethodSecurity</span>(prePostEnabled <span style="color:#99d1db;font-weight:bold">=</span> <span style="color:#ef9f76">true</span>)  
</span></span><span style="display:flex;"><span><span style="color:#e78284">public</span> <span style="color:#e78284">class</span> <span style="color:#e5c890">SecurityConfig</span> <span style="color:#e78284">extends</span> WebSecurityConfigurerAdapter {  
</span></span><span style="display:flex;"><span>    <span style="color:#8caaee;font-weight:bold">@Autowired</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">private</span> JwtAuthenticationTokenFilter jwtAuthenticationTokenFilter;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#8caaee;font-weight:bold">@Autowired</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">private</span> AuthenticationEntryPointImpl authenticationEntryPoint;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#8caaee;font-weight:bold">@Autowired</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">private</span> AccessDeniedHandlerImpl accessDeniedHandler;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#8caaee;font-weight:bold">@Override</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#8caaee;font-weight:bold">@Bean</span>    
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">public</span> AuthenticationManager <span style="color:#8caaee">authenticationManagerBean</span>() <span style="color:#e78284">throws</span> Exception {  
</span></span><span style="display:flex;"><span>        <span style="color:#ca9ee6">return</span> <span style="color:#e78284">super</span>.<span style="color:#8caaee">authenticationManagerBean</span>();  
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#8caaee;font-weight:bold">@Bean</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">public</span> PasswordEncoder <span style="color:#8caaee">passwordEncoder</span>() {  
</span></span><span style="display:flex;"><span>        <span style="color:#ca9ee6">return</span> <span style="color:#ca9ee6">new</span> BCryptPasswordEncoder();  
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>    <span style="color:#8caaee;font-weight:bold">@Override</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">protected</span> <span style="color:#e78284">void</span> <span style="color:#8caaee">configure</span>(HttpSecurity http) <span style="color:#e78284">throws</span> Exception {  
</span></span><span style="display:flex;"><span>        http  
</span></span><span style="display:flex;"><span>                <span style="color:#737994;font-style:italic">// 关闭csrf  </span>
</span></span><span style="display:flex;"><span>                .<span style="color:#8caaee">csrf</span>().<span style="color:#8caaee">disable</span>()  
</span></span><span style="display:flex;"><span>                <span style="color:#737994;font-style:italic">// 不通过Session获取SecurityContext  </span>
</span></span><span style="display:flex;"><span>                .<span style="color:#8caaee">sessionManagement</span>().<span style="color:#8caaee">sessionCreationPolicy</span>(SessionCreationPolicy.<span style="color:#8caaee">STATELESS</span>)  
</span></span><span style="display:flex;"><span>                .<span style="color:#8caaee">and</span>()  
</span></span><span style="display:flex;"><span>                .<span style="color:#8caaee">authorizeRequests</span>()  
</span></span><span style="display:flex;"><span>                <span style="color:#737994;font-style:italic">// 对于登录接口允许匿名访问  </span>
</span></span><span style="display:flex;"><span>                .<span style="color:#8caaee">antMatchers</span>(<span style="color:#a6d189">&#34;/user/login&#34;</span>).<span style="color:#8caaee">anonymous</span>()  
</span></span><span style="display:flex;"><span>                .<span style="color:#8caaee">anyRequest</span>().<span style="color:#8caaee">authenticated</span>();  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>        http.<span style="color:#8caaee">exceptionHandling</span>()  
</span></span><span style="display:flex;"><span>                .<span style="color:#8caaee">authenticationEntryPoint</span>(authenticationEntryPoint)  
</span></span><span style="display:flex;"><span>                .<span style="color:#8caaee">accessDeniedHandler</span>(accessDeniedHandler);  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>        http.<span style="color:#8caaee">logout</span>().<span style="color:#8caaee">disable</span>();  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>        http.<span style="color:#8caaee">addFilterBefore</span>(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.<span style="color:#8caaee">class</span>);  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>        <span style="color:#737994;font-style:italic">// 允许跨域  </span>
</span></span><span style="display:flex;"><span>        http.<span style="color:#8caaee">cors</span>();  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="权限分离">权限分离</h3>
<p>这个项目的权限分离基于 RBAC 模型，配合 Spring Security 使用起来也非常方便。大概过程是在数据库中加了一张权限表（下面代码中是 menu），然后每个角色有不同的权限，也就是一对多的关系，当然，角色还需要和用户关联起来，这里是多对多的关系，还是比较复杂的。</p>
<div class="highlight"><pre tabindex="0" style="color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#99d1db;font-weight:bold">#</span> <span style="color:#e78284">先查用户有哪些角色</span>
</span></span><span style="display:flex;"><span><span style="color:#99d1db;font-weight:bold">#</span> <span style="color:#e78284">然后再查每个角色有什么权限</span>
</span></span><span style="display:flex;"><span><span style="color:#99d1db;font-weight:bold">#</span> <span style="color:#e78284">最后去重得到权限列表</span>
</span></span><span style="display:flex;"><span><span style="color:#ca9ee6">SELECT</span>
</span></span><span style="display:flex;"><span>	<span style="color:#ca9ee6">DISTINCT</span> perms
</span></span><span style="display:flex;"><span><span style="color:#ca9ee6">FROM</span>
</span></span><span style="display:flex;"><span>	sys_user_role ur
</span></span><span style="display:flex;"><span>	<span style="color:#ca9ee6">LEFT</span> <span style="color:#ca9ee6">JOIN</span> sys_role_menu rm <span style="color:#ca9ee6">ON</span> ur.role_id <span style="color:#99d1db;font-weight:bold">=</span> rm.role_id
</span></span><span style="display:flex;"><span>	<span style="color:#ca9ee6">LEFT</span> <span style="color:#ca9ee6">JOIN</span> sys_menu m <span style="color:#ca9ee6">ON</span> m.id <span style="color:#99d1db;font-weight:bold">=</span> rm.menu_id
</span></span><span style="display:flex;"><span><span style="color:#ca9ee6">WHERE</span>
</span></span><span style="display:flex;"><span>	ur.user_id <span style="color:#99d1db;font-weight:bold">=</span> <span style="color:#99d1db;font-weight:bold">?</span> <span style="color:#ca9ee6">AND</span>
</span></span><span style="display:flex;"><span>	m.menu_type <span style="color:#ca9ee6">IN</span> (<span style="color:#a6d189">&#39;C&#39;</span>, <span style="color:#a6d189">&#39;F&#39;</span>) <span style="color:#ca9ee6">AND</span>
</span></span><span style="display:flex;"><span>	m.<span style="color:#99d1db;font-weight:bold">`</span>status<span style="color:#99d1db;font-weight:bold">`</span> <span style="color:#99d1db;font-weight:bold">=</span> <span style="color:#ef9f76">0</span> <span style="color:#ca9ee6">AND</span>
</span></span><span style="display:flex;"><span>	m.del_flag <span style="color:#99d1db;font-weight:bold">=</span> <span style="color:#ef9f76">0</span>;
</span></span></code></pre></div><p>另外，这个 UP 貌似是参考若依实现的，不同用户能够看到不同的菜单，靠的是后端返回的组件路径，前端根据这个渲染，感觉实际中不太可能这样干？我个人认为跟前端框架耦合了，但我也不知道实际中是如何实现的。</p>
<h3 id="树形结构">树形结构</h3>
<p>返回给前端的评论列表和菜单列表都采用了树形结构，感觉也挺难的，用到了递归，能听懂但是自己写不出来，狠狠地去 LeetCode 刷二叉树🤣。</p>
<div class="highlight"><pre tabindex="0" style="color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#ca9ee6">&#34;code&#34;</span>:<span style="color:#ef9f76">200</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#ca9ee6">&#34;data&#34;</span>:{
</span></span><span style="display:flex;"><span>		<span style="color:#ca9ee6">&#34;menus&#34;</span>:[
</span></span><span style="display:flex;"><span>			{
</span></span><span style="display:flex;"><span>				<span style="color:#ca9ee6">&#34;children&#34;</span>:[
</span></span><span style="display:flex;"><span>					{
</span></span><span style="display:flex;"><span>						<span style="color:#ca9ee6">&#34;children&#34;</span>:[],
</span></span><span style="display:flex;"><span>						<span style="color:#ca9ee6">&#34;component&#34;</span>:<span style="color:#a6d189">&#34;content/link/index&#34;</span>,
</span></span><span style="display:flex;"><span>						<span style="color:#ca9ee6">&#34;createTime&#34;</span>:<span style="color:#a6d189">&#34;2022-01-08 02:56:50&#34;</span>,
</span></span><span style="display:flex;"><span>						<span style="color:#ca9ee6">&#34;icon&#34;</span>:<span style="color:#a6d189">&#34;404&#34;</span>,
</span></span><span style="display:flex;"><span>						<span style="color:#ca9ee6">&#34;id&#34;</span>:<span style="color:#ef9f76">2022</span>,
</span></span><span style="display:flex;"><span>						<span style="color:#ca9ee6">&#34;isFrame&#34;</span>:<span style="color:#ef9f76">1</span>,
</span></span><span style="display:flex;"><span>						<span style="color:#ca9ee6">&#34;menuName&#34;</span>:<span style="color:#a6d189">&#34;友链管理&#34;</span>,
</span></span><span style="display:flex;"><span>						<span style="color:#ca9ee6">&#34;menuType&#34;</span>:<span style="color:#a6d189">&#34;C&#34;</span>,
</span></span><span style="display:flex;"><span>						<span style="color:#ca9ee6">&#34;orderNum&#34;</span>:<span style="color:#ef9f76">4</span>,
</span></span><span style="display:flex;"><span>						<span style="color:#ca9ee6">&#34;parentId&#34;</span>:<span style="color:#ef9f76">2017</span>,
</span></span><span style="display:flex;"><span>						<span style="color:#ca9ee6">&#34;path&#34;</span>:<span style="color:#a6d189">&#34;link&#34;</span>,
</span></span><span style="display:flex;"><span>						<span style="color:#ca9ee6">&#34;perms&#34;</span>:<span style="color:#a6d189">&#34;content:link:list&#34;</span>,
</span></span><span style="display:flex;"><span>						<span style="color:#ca9ee6">&#34;status&#34;</span>:<span style="color:#a6d189">&#34;0&#34;</span>,
</span></span><span style="display:flex;"><span>						<span style="color:#ca9ee6">&#34;visible&#34;</span>:<span style="color:#a6d189">&#34;0&#34;</span>
</span></span><span style="display:flex;"><span>					}
</span></span><span style="display:flex;"><span>				],
</span></span><span style="display:flex;"><span>				<span style="color:#ca9ee6">&#34;createTime&#34;</span>:<span style="color:#a6d189">&#34;2022-01-08 02:44:38&#34;</span>,
</span></span><span style="display:flex;"><span>				<span style="color:#ca9ee6">&#34;icon&#34;</span>:<span style="color:#a6d189">&#34;table&#34;</span>,
</span></span><span style="display:flex;"><span>				<span style="color:#ca9ee6">&#34;id&#34;</span>:<span style="color:#ef9f76">2017</span>,
</span></span><span style="display:flex;"><span>				<span style="color:#ca9ee6">&#34;isFrame&#34;</span>:<span style="color:#ef9f76">1</span>,
</span></span><span style="display:flex;"><span>				<span style="color:#ca9ee6">&#34;menuName&#34;</span>:<span style="color:#a6d189">&#34;内容管理&#34;</span>,
</span></span><span style="display:flex;"><span>				<span style="color:#ca9ee6">&#34;menuType&#34;</span>:<span style="color:#a6d189">&#34;M&#34;</span>,
</span></span><span style="display:flex;"><span>				<span style="color:#ca9ee6">&#34;orderNum&#34;</span>:<span style="color:#ef9f76">4</span>,
</span></span><span style="display:flex;"><span>				<span style="color:#ca9ee6">&#34;parentId&#34;</span>:<span style="color:#ef9f76">0</span>,
</span></span><span style="display:flex;"><span>				<span style="color:#ca9ee6">&#34;path&#34;</span>:<span style="color:#a6d189">&#34;content&#34;</span>,
</span></span><span style="display:flex;"><span>				<span style="color:#ca9ee6">&#34;perms&#34;</span>:<span style="color:#a6d189">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>				<span style="color:#ca9ee6">&#34;status&#34;</span>:<span style="color:#a6d189">&#34;0&#34;</span>,
</span></span><span style="display:flex;"><span>				<span style="color:#ca9ee6">&#34;visible&#34;</span>:<span style="color:#a6d189">&#34;0&#34;</span>
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		]
</span></span><span style="display:flex;"><span>	},
</span></span><span style="display:flex;"><span>	<span style="color:#ca9ee6">&#34;msg&#34;</span>:<span style="color:#a6d189">&#34;操作成功&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="图片上传到-oss">图片上传到 OSS</h3>
<p>图片上传在 controller 中使用 <code>MultipartFile</code> 接收参数，并且要求请求头中的 Content-Type 必须是 multipart/form-data。然后就是调用云服务厂商的 SDK，白嫖了一下七牛云，完成了这个接口的开发。</p>
<div class="highlight"><pre tabindex="0" style="color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e78284">public</span> ResponseResult <span style="color:#8caaee">uploadImg</span>(MultipartFile img) {  
</span></span><span style="display:flex;"><span>    String originalFilename <span style="color:#99d1db;font-weight:bold">=</span> img.<span style="color:#8caaee">getOriginalFilename</span>();  
</span></span><span style="display:flex;"><span>    <span style="color:#ca9ee6">if</span> (<span style="color:#99d1db;font-weight:bold">!</span>originalFilename.<span style="color:#8caaee">endsWith</span>(<span style="color:#a6d189">&#34;.png&#34;</span>)) {  
</span></span><span style="display:flex;"><span>        <span style="color:#ca9ee6">throw</span> <span style="color:#ca9ee6">new</span> SystemException(AppHttpCodeEnum.<span style="color:#8caaee">FILE_TYPE_ERROR</span>);  
</span></span><span style="display:flex;"><span>    }  
</span></span><span style="display:flex;"><span>    String filePath <span style="color:#99d1db;font-weight:bold">=</span> PathUtils.<span style="color:#8caaee">generateFilePath</span>(originalFilename); 
</span></span><span style="display:flex;"><span>    String url <span style="color:#99d1db;font-weight:bold">=</span> uploadOss(img, filePath);
</span></span><span style="display:flex;"><span>    <span style="color:#ca9ee6">return</span> ResponseResult.<span style="color:#8caaee">okResult</span>(url);  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="其它">其它</h3>
<p>在该项目中，还学习到了一些其它知识，了解的也不是很深，就不详细写了，但平时使用的频率也不低。</p>
<ul>
<li>AOP 实现统一打印日志（如请求和响应）</li>
<li>定时任务（如定时将 Redis 中的数据同步到 MySQL）</li>
<li>使用 Swagger 维护接口文档</li>
<li>&hellip;&hellip;</li>
</ul>
<h2 id="总结">总结</h2>
<p>非常感谢这位<a href="https://space.bilibili.com/663528522/">老师</a>的课程，一直秉持着”授人以鱼，不如授人以渔“的观点，强调 debug、看文档的重要性。老师也在后面留了一些功能让大家自己实现，它只提供了需求和接口文档，大部分是 CRUD，写了两个就不想写了，就这样结束吧，其实坚持写完还是能锻炼一下熟练度的，但是我得往后走了。</p>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">上次修改於 2023-11-21</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts">
			下回<br>已經到底啦。
                </a>
                
                
                
                <a class="older-posts" href="/about/">
			上回<br>关于我
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                












            </div>
        </div>
    </div>


                    </div>
            </div><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://yoke2002.github.io/">
    
        <div class="nav-title">
            白日幻想家
        </div>
        
        <div class="nav-subtitle">
            争取去发光，而不是等待被照亮
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                歸檔 / Archive
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                分類 / Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/about">
                關於 / About
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSS
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	白日幻想家
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    <div class="toc-wrapper">
        

        
        <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 目錄 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%89%8d%e8%a8%80" class="nav-前言">
									前言
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8d%9a%e5%ae%a2%e9%a1%b9%e7%9b%ae" class="nav-博客项目">
									博客项目
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9b%b8%e5%85%b3" class="nav-数据库相关">
									数据库相关
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%a1%b9%e7%9b%ae%e6%90%ad%e5%bb%ba" class="nav-项目搭建">
									项目搭建
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%99%bb%e5%bd%95%e5%92%8c%e8%ae%a4%e8%af%81" class="nav-登录和认证">
									登录和认证
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%9d%83%e9%99%90%e5%88%86%e7%a6%bb" class="nav-权限分离">
									权限分离
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%a0%91%e5%bd%a2%e7%bb%93%e6%9e%84" class="nav-树形结构">
									树形结构
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%9b%be%e7%89%87%e4%b8%8a%e4%bc%a0%e5%88%b0-oss" class="nav-图片上传到-oss">
									图片上传到 OSS
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%85%b6%e5%ae%83" class="nav-其它">
									其它
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%80%bb%e7%bb%93" class="nav-总结">
									总结
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
        
    </div>
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top"
            :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	白日幻想家
	
</div>
            </div>
    
    <script src="/js/journal.js"></script></body>
</html>
